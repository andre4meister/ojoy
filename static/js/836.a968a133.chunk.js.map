{"version":3,"file":"static/js/836.a968a133.chunk.js","mappings":"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","sources":["webpack://ojoy/./src/components/MainListItem/MainListItem.module.scss?bb3e","components/MainListItem/MainListItem.jsx","webpack://ojoy/./src/components/PageTitle/PageTitle.module.scss?9566","components/PageTitle/PageTitle.jsx","components/SignedImage/SignedImage.jsx","webpack://ojoy/./src/pages/MoviesPage/MoviesPage.module.scss?5412","webpack://ojoy/./src/components/Pagination/Pagination.module.scss?7fb8","components/Pagination/Pagination.jsx","pages/MoviesPage/MoviesPage.jsx","pages/SerialsPage/SerialsPageProvider.jsx","s3.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"item\":\"MainListItem_item__rnepy\",\"item__image\":\"MainListItem_item__image__fkHOi\",\"item__name\":\"MainListItem_item__name__p5lh7\",\"item__info\":\"MainListItem_item__info__J2oM9\"};","import React from 'react';\nimport styles from './MainListItem.module.scss';\nimport { useNavigate } from 'react-router-dom';\nimport SignedImage from '../SignedImage/SignedImage';\n\nconst MainListItem = ({ item, showType = false }) => {\n  const itemCreationYear = item.createdAt.split(' ')[1];\n  const itemInfo = showType ? `${itemCreationYear} ${item.type}` : itemCreationYear;\n\n  const navigate = useNavigate();\n  const navigateToItem = () => {\n    const base = item.type === 'Фільм' ? 'movie' : 'serial';\n    navigate(`/${base}/${item.id}`);\n  };\n\n  return (\n    <li className={styles.item} key={item.id}>\n      <div onClick={navigateToItem} className={styles.item__image}>\n        <SignedImage url={item.mainPhotoUrl} alt={item.name} />\n      </div>\n      <div className={styles.item__name}>{item.name}</div>\n      <div className={styles.item__info}>{itemInfo}</div>\n    </li>\n  );\n};\n\nexport default MainListItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"PageTitle_title__ouGV9\"};","import React from 'react';\nimport styles from './PageTitle.module.scss';\n\nconst PageTitle = ({ title }) => {\n  return <div className={styles.title}>{title}</div>;\n};\n\nexport default PageTitle;\n","import { useEffect, useState } from 'react';\nimport { getObjectSignedUrl } from '../../s3';\n\nconst SignedImage = ({ url, alt = '' }) => {\n  const [signedUrl, setSignedUrl] = useState(null);\n\n  useEffect(() => {\n    getObjectSignedUrl(url).then((signedUrl) => {\n      setSignedUrl(signedUrl);\n    });\n  }, [url]);\n\n  return <img src={signedUrl} alt={alt} />;\n};\n\nexport default SignedImage;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MoviesPage_container__VNyGx\",\"moviesBlock\":\"MoviesPage_moviesBlock__NGxyS\",\"moviesList\":\"MoviesPage_moviesList__7DqpL\",\"pagination\":\"MoviesPage_pagination__ssdf+\"};","// extracted by mini-css-extract-plugin\nexport default {\"pagination\":\"Pagination_pagination__1C2vY\",\"pagination__button\":\"Pagination_pagination__button__dHIBm\",\"pagination__button_active\":\"Pagination_pagination__button_active__OlG2O\"};","import React from 'react';\nimport styles from './Pagination.module.scss';\nimport { Button } from 'antd';\n\nconst Pagination = ({ pagesCount, currentPage, setCurrentPage }) => {\n  const array = [];\n  for (let i = 0; i < pagesCount; i++) {\n    array.push(i);\n  }\n\n  const handleSetCurrentPage = (page) => {\n    if (page < 0 || page > pagesCount - 1 || page === currentPage) return;\n    setCurrentPage(page);\n  };\n\n  return (\n    <div className={styles.pagination}>\n      {array.map((item) => (\n        <Button\n          key={item}\n          className={`${styles.pagination__button} ${item === currentPage ? styles.pagination__button_active : ''}`}\n          onClick={() => handleSetCurrentPage(item)}\n        >\n          {item + 1}\n        </Button>\n      ))}\n    </div>\n  );\n};\n\nexport default Pagination;\n","import styles from './MoviesPage.module.scss';\nimport PageTitle from '../../components/PageTitle/PageTitle';\nimport MainListItem from '../../components/MainListItem/MainListItem';\nimport Pagination from '../../components/Pagination/Pagination';\nimport { useMemo, useState } from 'react';\n\nconst MoviesPage = ({ movies, title }) => {\n  const pages = Math.ceil(movies.length / 18);\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const showMovies = useMemo(() => {\n    return movies.slice(currentPage * 18, currentPage * 18 + 18);\n  }, [movies, currentPage]);\n\n  return (\n    <div className={styles.container}>\n      <PageTitle title={title} />\n      <div className={styles.moviesBlock}>\n        <ul className={styles.moviesList}>\n          {showMovies.map((serial) => (\n            <MainListItem item={serial} key={serial.id} />\n          ))}\n        </ul>\n      </div>\n      <div className={styles.pagination}>\n        <Pagination currentPage={currentPage} setCurrentPage={setCurrentPage} pagesCount={pages} />\n      </div>\n    </div>\n  );\n};\n\nexport default MoviesPage;\n","import React, { useContext, useEffect } from 'react';\nimport MoviesPage from '../MoviesPage/MoviesPage';\nimport AppContext from '../../context/AppContext';\nimport DataResolver from '../Layout/DataResolver';\n\nconst SerialsPageProvider = () => {\n  const { actions } = useContext(AppContext);\n\n  const { isLoading, error, data, refetch } = actions.getSerials;\n\n  useEffect(() => {\n    refetch();\n  }, []);\n\n  return (\n    <DataResolver error={error} data={data} loading={isLoading}>\n      <MoviesPage movies={data} title=\"Серіали\" />\n    </DataResolver>\n  );\n};\n\nexport default SerialsPageProvider;\n","import { DeleteObjectCommand, GetObjectCommand, PutObjectCommand, S3Client } from '@aws-sdk/client-s3';\nimport { getSignedUrl } from '@aws-sdk/s3-request-presigner';\n\nconst bucketName = process.env.AWS_BUCKET_NAME || 'ojoy';\nconst region = process.env.AWS_BUCKET_REGION || 'eu-central-1';\nconst accessKeyId = process.env.AWS_ACCESS_KEY || 'AKIAXPHMUHUIVWBLWRXF';\nconst secretAccessKey = process.env.AWS_SECRET_ACCESS_KEY || '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';\n\nconst s3Client = new S3Client({\n  region,\n  credentials: {\n    accessKeyId,\n    secretAccessKey,\n  },\n});\n\nexport function uploadFile(fileBuffer, fileName, mimetype) {\n  const uploadParams = {\n    Bucket: bucketName,\n    Body: fileBuffer,\n    Key: fileName,\n    ContentType: mimetype,\n  };\n\n  return s3Client.send(new PutObjectCommand(uploadParams));\n}\n\nexport function deleteFile(fileName) {\n  const deleteParams = {\n    Bucket: bucketName,\n    Key: fileName,\n  };\n\n  return s3Client.send(new DeleteObjectCommand(deleteParams));\n}\n\nexport async function getObjectSignedUrl(key) {\n  const params = {\n    Bucket: bucketName,\n    Key: key,\n  };\n\n  const command = new GetObjectCommand(params);\n  const seconds = 28800; // 8 hours\n  return await getSignedUrl(s3Client, command, { expiresIn: seconds });\n}\n"],"names":["_ref","item","_ref$showType","showType","itemCreationYear","createdAt","split","itemInfo","concat","type","navigate","useNavigate","_jsxs","className","styles","children","_jsx","onClick","base","id","SignedImage","url","mainPhotoUrl","alt","name","title","_ref$alt","_useState","useState","_useState2","_slicedToArray","signedUrl","setSignedUrl","useEffect","getObjectSignedUrl","then","src","pagesCount","currentPage","setCurrentPage","array","i","push","map","Button","page","movies","pages","Math","ceil","length","showMovies","useMemo","slice","PageTitle","serial","MainListItem","Pagination","_actions$getSerials","useContext","AppContext","actions","getSerials","isLoading","error","data","refetch","DataResolver","loading","MoviesPage","bucketName","process","AWS_BUCKET_NAME","region","AWS_BUCKET_REGION","accessKeyId","AWS_ACCESS_KEY","secretAccessKey","AWS_SECRET_ACCESS_KEY","s3Client","S3Client","credentials","_x","_getObjectSignedUrl","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","key","params","command","wrap","_context","prev","next","Bucket","Key","GetObjectCommand","getSignedUrl","expiresIn","abrupt","sent","stop"],"sourceRoot":""}